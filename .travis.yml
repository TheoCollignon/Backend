env:
  global:
  - CC_TEST_REPORTER_ID=c045f466c1e541a33abe007298a5d14fc38d59fb34889f12649e8bab2f0b4c44

language: ruby
rvm:
  - 2.5.7

before_script:
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64
  > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- "./cc-test-reporter before-build"

  script:
- bundle exec rails db:migrate RAILS_ENV=test
- bundle exec rake  

after_script:
- "./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT"